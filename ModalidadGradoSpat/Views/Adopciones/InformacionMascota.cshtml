@model Mascota
@{
    Layout = "~/Views/Shared/_Layout.cshtml";
}
<style>
    .rounded {
        border-radius: .55rem !important
    }

    hr.solid {
        border-top: 3px solid #bbb;
    }

    .carousel-item {
        text-align: center;
    }

    .carousel-inner img {
        display: inline-block !important;
    }

    .carousel-inner {
        height: 100%;
        background-color: #213B74;
    }

    button[disabled] {
        cursor: not-allowed;
    }
</style>
@if (Model == null)
{
    <div class="card rounded col-12">
        <div class="card-body">
            <p class="text-center">
                La mascota no pudo ser encontrada, Id incorrecto.
            </p>
        </div>
    </div>
}
else
{
    @if (Model.Fotos.Count() <= 0)
    {
        <div class="card rounded col-12">
            <div class="card-body">
                <p>Actualmente no se agregaron fotos de la mascota @Model.Nombre.</p>
            </div>
        </div>
    }
    <div id="carouselExampleControls" class="carousel slide carousel-fade" data-ride="carousel">
        <div class="carousel-inner">
            @foreach (var foto in Model.Fotos)
            {
                if (foto.IsPrincipal == true)
                {
                    <div class="carousel-item active">
                        <img class="d-block img-fluid" src="@foto.Url" alt="@foto.Id" width="500" height="500">
                    </div>
                }
                else
                {
                    <div class="carousel-item">
                        <img class="d-block img-fluid" src="@foto.Url" alt="@foto.Id" width="500" height="500">
                    </div>
                }
            }
        </div>
        <a class="carousel-control-prev" href="#carouselExampleControls" role="button" data-slide="prev">
            <span class="carousel-control-prev-icon" aria-hidden="true"></span>
            <span class="sr-only">Previous</span>
        </a>
        <a class="carousel-control-next" href="#carouselExampleControls" role="button" data-slide="next">
            <span class="carousel-control-next-icon" aria-hidden="true"></span>
            <span class="sr-only">Next</span>
        </a>
    </div>
    <br />
    <div class="container-fluid row justify-content-between">
        <div class="card rounded col-sm-12 col-lg-8">
            <div class="card-body">
                <h3 class="card-title"><b>@Model.Nombre</b></h3>

                <hr class="solid">

                <h3 class="card-title"><b>Acerca de la Mascota</b></h3>
                <p class="card-text"><b>Sexo Mascota:</b> @Model.Sexo   /   <b>Edad Mascota:</b> @Model.Edad   /   <b>Tama&ntilde;o Mascota:</b> @Model.Tamaño</p>

                <hr class="solid">

                @if (Model.Esterilizado)
                {
                    <p class="card-text"><b>Esterilizado:</b> La mascota se encuentra esterilizada.</p>
                }
                else
                {
                    <p class="card-text"><b>Esterilizado:</b> La mascota no se encuentra esterilizada.</p>
                }
                <p class="card-text"><b>Caracter&iacute;sticas:</b> @Model.Caracteristicas</p>
                <p class="card-text"><b>Rasgos Particulares:</b> @Model.RasgosParticulares</p>
            </div>
        </div>
        <div class="card rounded col-sm-12 col-lg-3">
            <div class="card-body">
                <button id="btnAdoptar" onclick="location.href='@Url.Action("ContratoAdopcion","Adopciones",new { id=Model.Id, area=""},Context.Request.Scheme)'" type="button" class="btn btn-primary btn-block rounded-pill"><i class="fa fa-paw fa-2x" aria-hidden="true"></i>Quiero Adoptar</button>
                @if (Model.Estado == "Inactivo")
                {
                    <div class="alert alert-warning mt-5" role="alert">
                        <p class="text-center">La mascota actualmente no est&aacute; en adopci&oacute;n.</p>
                    </div>
                }
                else if (Model.Estado == "Adoptada")
                {
                    <div class="alert alert-warning mt-5" role="alert">
                        <p class="text-center">La mascota ha sido adoptada.</p>
                    </div>
                }
                else if (Model.Estado == "En Proceso")
                {
                    <div class="alert alert-warning mt-5" role="alert">
                        <p class="text-center">La mascota se encuentra en un proceso de adopci&oacute;n.</p>
                    </div>
                }
            </div>
        </div>
    </div>
    <script type="text/javascript">
        $('.carousel').carousel();
        @if (Model.Estado.Equals("Inactivo")||Model.Estado.Equals("Adoptada")|| Model.Estado.Equals("En Proceso"))
        {
        <text>
        $("#btnAdoptar").prop('disabled', true);
        </text>
        }
    </script>
    @if (Model.ReporteTratamientos.Count() > 0)
    {
        <style>
            ul.timeline {
                list-style-type: none;
                position: relative;
                padding-left: 1.5rem;
            }

                /* Timeline vertical line */
                ul.timeline:before {
                    content: ' ';
                    background: #ddd;
                    display: inline-block;
                    position: absolute;
                    left: 16px;
                    width: 4px;
                    height: 100%;
                    z-index: 400;
                    border-radius: 1rem;
                }

            li.timeline-item {
                margin: 20px 0;
            }

            /* Timeline item arrow */
            .timeline-arrow {
                border-top: 0.5rem solid transparent;
                border-right: 0.5rem solid #ddd;
                border-bottom: 0.5rem solid transparent;
                display: block;
                position: absolute;
                left: 2rem;
            }

            /* Timeline item circle marker */
            li.timeline-item::before {
                content: ' ';
                background: #00ff21;
                display: inline-block;
                position: absolute;
                border-radius: 50%;
                border: 3px solid #ddd;
                left: 11px;
                width: 14px;
                height: 14px;
                z-index: 400;
                box-shadow: 0 0 5px rgba(0, 0, 0, 0.2);
            }
        </style>
        <div class="row">
            <div class="col-lg-7 mx-auto">

                <!-- Timeline -->
                <ul class="timeline">
                    @foreach (var item in Model.ReporteTratamientos)
                    {
                        <li class="timeline-item bg-white rounded ml-3 p-4 shadow">
                            <div class="timeline-arrow"></div>
                            <div class="d-flex justify-content-between">
                                <p class="text-primary">@item.Titulo</p>
                                <p class="float-right text-primary">@item.FechaCreacion.ToShortDateString()</p>
                            </div>
                            <p class="mt-4">@item.Descripcion</p>
                        </li>

                    }
                </ul>
            </div>
        </div>
    }
    else
    {
        <div class="card">
            <div class="card-body">
                <p class="card-text">
                    No existen reportes de tratamiento creados para esta mascota.
                </p>
            </div>
        </div>
    }
}