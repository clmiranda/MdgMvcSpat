@model Mascota
@{
    Layout = "~/Views/Shared/_Layout.cshtml";
}
@if (Model==null)
{
    <div class="card">
        <div class="card-body">
            <p class="card-text">
                La mascota no existe, no se puede listar.
            </p>
        </div>
    </div>
}
else
{
    @if (Model.Estado.Equals("Inactivo"))
    {
        @if (Model.ReporteTratamientos.Count() > 0)
        {
            <style>
                ul.timeline {
                    list-style-type: none;
                    position: relative;
                }

                    ul.timeline:before {
                        content: ' ';
                        background: #d4d9df;
                        display: inline-block;
                        position: absolute;
                        left: 29px;
                        width: 2px;
                        height: 100%;
                        z-index: 400;
                    }

                    ul.timeline > li {
                        margin: 20px 0;
                        padding-left: 20px;
                    }

                        ul.timeline > li:before {
                            content: ' ';
                            background: white;
                            display: inline-block;
                            position: absolute;
                            border-radius: 50%;
                            border: 3px solid #22c0e8;
                            left: 20px;
                            width: 20px;
                            height: 20px;
                            z-index: 400;
                        }

                .timeline li:nth-child(n+3) {
                    display: none;
                }
            </style>
            <div class="row mt-3">
                <div class="col-lg-6 mx-auto">
                    <h3 class="mt-3">Evoluci&oacute;n de la mascota desde su rescate.</h3>
                    <ul class="timeline">
                        @foreach (var item in Model.ReporteTratamientos)
                        {
                            <li class="bg-white rounded ml-3 p-1 shadow">
                                <div class="d-flex justify-content-between">
                                    <p class="text-primary">@item.Titulo</p>
                                    <p class="float-right text-primary">@item.FechaCreacion.ToShortDateString()</p>
                                </div>
                                <p>@item.Descripcion</p>
                            </li>

                        }
                    </ul>
                    <button id="loadMore" class="btn btn-primary">Mostrar m&aacute;s</button>
                </div>
            </div>
            <script>
                $(document).ready(function () {
                    $('#loadMore').click(function () {
                        $('.timeline li:hidden').slice(0, 2).slideDown();
                        if ($('.timeline li').length == $('.timeline li:visible').length) {
                            $('#loadMore').hide();
                        }
                    });
                });
            </script>
        }
        else
        {
            <div class="card">
                <div class="card-body">
                    <p class="card-text">
                        No existen reportes de tratamiento creados para esta mascota.
                    </p>
                </div>
            </div>
        }
    }
    else
    {
        <div class="card">
            <div class="card-body">
                <p class="card-text">
                    El estado de la mascota debe ser "Inactivo" para poder visualizar.
                </p>
            </div>
        </div>
    }
}